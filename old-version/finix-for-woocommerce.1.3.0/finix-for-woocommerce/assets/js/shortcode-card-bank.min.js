let FinixFormOptions={showAddress:!!finix_params.finix_form_options.showAddress,showLabels:!!finix_params.finix_form_options.showLabels,labels:finix_params.finix_form_options.labels||{name:finix_params.text.full_name},showPlaceholders:!!finix_params.finix_form_options.showPlaceholders,placeholders:finix_params.finix_form_options.placeholders||{name:finix_params.text.full_name},hideFields:finix_params.finix_form_options.hideFields||["address_line1","address_line2","address_city","address_state"],requiredFields:finix_params.finix_form_options.requiredFields||["name","address_country","address_postal_code"],hideErrorMessages:!!finix_params.finix_form_options.hideErrorMessages,errorMessages:finix_params.finix_form_options.errorMessages||{name:finix_params.text.error_messages.name,address_city:finix_params.text.error_messages.address_city},styles:{default:{},success:{},error:{color:"#e2401c",boxShadow:"inset 2px 0 0 #e2401c"}},onUpdate(e,i,r){},onLoad(){}};function copyWooInputStylesToFinix(){var e=jQuery("input#billing_city, input#shipping_city");return FinixFormOptions.styles.default={color:e.css("color"),backgroundColor:e.css("background-color"),border:`${e.css("border-width")} ${e.css("border-style")} `+e.css("border-color"),borderRadius:`${e.css("border-top-left-radius")} ${e.css("border-top-right-radius")} ${e.css("border-bottom-right-radius")} `+e.css("border-bottom-left-radius"),fontFamily:e.css("font-family"),fontWeight:e.css("font-weight"),lineHeight:e.css("line-height"),boxShadow:e.css("box-shadow"),maxHeight:"100%",height:"100%",appearance:"auto"},FinixFormOptions}function triggerFinixSubmitError(e){var i=jQuery("form.woocommerce-checkout, form#order_review");void 0!==e&&0!==e.length||(e='<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>"),jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message, .is-error, .is-success").remove(),i.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),i.removeClass("processing").unblock(),i.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur");let r=jQuery(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");r.length||(r=i),jQuery.scroll_to_notices(r),i.find('.woocommerce-error[tabindex="-1"], .wc-block-components-notice-banner.is-error[tabindex="-1"]').trigger("focus"),jQuery(document.body).trigger("checkout_error",[e])}async function tokenRequest(e,o){return document.getElementById("place_order").disabled=!0,new Promise((r,n)=>{e.submit(finix_params.environment,finix_params.application,function(e,i){e?(triggerFinixSubmitError(),document.getElementById(o+"_token").value="",document.getElementById("place_order").disabled=!1,n(e)):(e=(i.data||{}).id,document.getElementById(o+"_token").value=e,document.getElementById("place_order").disabled=!1,r(e))})})}function initFinixForm(e){if(""===document.getElementById(e+"-form").innerHTML)switch(e){case"finix_gateway":return finix_params.finixForms.finix_gateway=window.Finix.CardTokenForm(e+"-form",FinixFormOptions),finix_params.finixForms.finix_gateway;case"finix_bank_gateway":return finix_params.finixForms.finix_bank_gateway=window.Finix.BankTokenForm(e+"-form",FinixFormOptions),finix_params.finixForms.finix_bank_gateway}return null}function processPlaceOrder(n){jQuery(document).on("click","#place_order",async function(e){var i=jQuery('input[name="payment_method"]:checked',n).val();if(!["finix_gateway","finix_bank_gateway"].includes(i))return!0;let r;switch(i){case"finix_gateway":r=finix_params.finixForms.finix_gateway;break;case"finix_bank_gateway":r=finix_params.finixForms.finix_bank_gateway}if(e.preventDefault(),e.stopImmediatePropagation(),n.find("#"+i+"_token").val())return n.trigger("submit"),!0;try{if(await tokenRequest(r,i))return n.trigger("submit"),!0}catch(e){return n.find("#"+i+"_token").val(""),triggerFinixSubmitError(),document.getElementById("place_order").disabled=!1}})}jQuery(function(){let r=jQuery("form.woocommerce-checkout, form#order_review");if(r.length){copyWooInputStylesToFinix(),window.Finix.Auth(finix_params.environment,finix_params.merchant,e=>{jQuery("#finix_fraud_session_id",r).length||r.prepend('<input type="hidden" id="finix_fraud_session_id" name="finix_fraud_session_id" value=""/>'),r.find("#finix_fraud_session_id").val(e);e=jQuery("#finix_nonce",r);e.length||r.prepend('<input type="hidden" id="finix_nonce" name="finix_nonce" value=""/>'),r.find("#finix_nonce").val(finix_params.nonce)}),finix_params.finixForms=finix_params.finixForms||{};var e=`
			<style id="test">
				#finix_gateway-form .finix-form-container iframe,
				#finix_bank_gateway-form .finix-form-container iframe {
					height: ${r.find("#billing_city").outerHeight()}px !important;
			</style>
			`;if(r.prepend(e),document.getElementById("finix_gateway-form")){let e=!1,i=setInterval(()=>{initFinixForm("finix_gateway"),null!==finix_params.finixForms.finix_gateway&&"function"==typeof finix_params.finixForms.finix_gateway.submit?(processPlaceOrder(r),e=!0):e&&clearInterval(i)},2e3)}if(document.getElementById("finix_bank_gateway-form")){let e=!1,i=setInterval(()=>{initFinixForm("finix_bank_gateway"),null!==finix_params.finixForms.finix_bank_gateway&&"function"==typeof finix_params.finixForms.finix_bank_gateway.submit?(processPlaceOrder(r),e=!0):e&&clearInterval(i)},2e3)}jQuery(document.body).on("checkout_error",function(e,i){document.getElementById("finix_gateway_token").value="",document.getElementById("finix_bank_gateway_token").value=""})}});